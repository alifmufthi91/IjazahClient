(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22890c"],{da70:function(t,e,a){"use strict";a.r(e),a.d(e,"GET_CIVITAS",(function(){return b}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CRow",[a("CCol",{attrs:{col:"12"}},[a("CCard",[a("CCardHeader",[t._v("Informasi Civitas Akademika")]),a("CCardBody",[a("h5",[t._v("Data On-Chain")]),a("CDataTable",{attrs:{striped:"",small:"",fixed:"",items:t.dataContract,fields:t.fields}}),a("h5",[t._v("Data Off-Chain (Subgraph)")]),a("CDataTable",{attrs:{striped:"",small:"",fixed:"",items:t.dataSubgraph,fields:t.fields}}),a("h5",[t._v("Data Off-Chain (IPFS)")]),a("CDataTable",{attrs:{striped:"",small:"",fixed:"",items:t.dataIpfs,fields:t.fields}}),a("CRow",{staticClass:"justify-content-center"},[a("CCol",{attrs:{sm:"3"}},[a("CCard",[a("CCardBody",[t.previewImage?t._e():a("div",[a("CProgress",{staticClass:"mt-1",staticStyle:{height:"20px"},attrs:{color:"success",value:100,animated:""}})],1),t.previewImage?a("div",[a("img",{staticClass:"d-block w-100 h-100 img-fluid",attrs:{src:t.previewImage}})]):t._e()])],1)],1)],1)],1),a("CCardFooter",[a("CButton",{attrs:{color:"primary"},on:{click:t.goBack}},[t._v("Back")])],1)],1)],1)],1)},i=[],r=a("9530"),s=a.n(r),o=a("3f55");function u(t,e){return v(t)||d(t,e)||l(t,e)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t,e){if(t){if("string"===typeof t)return f(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function d(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var a=[],n=!0,i=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)if(a.push(s.value),e&&a.length===e)break}catch(u){i=!0,r=u}finally{try{n||null==o["return"]||o["return"]()}finally{if(i)throw r}}return a}}function v(t){if(Array.isArray(t))return t}function p(){var t=h(["\n  query civita($nip: ID!) {\n    civita(id: $nip) {\n      id\n      name\n      role\n      linkedAccount {\n        id\n      }\n      timeCreated\n      lastUpdated\n    }\n  }\n"]);return p=function(){return t},t}function h(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var b=s()(p()),m=a("94e4"),C=m({host:"ipfs.infura.io",port:5001,protocol:"https"}),y={name:"InfoCivitas",beforeRouteEnter:function(t,e,a){a((function(t){t.usersOpened=e.fullPath}))},data:function(){return{usersOpened:null,dataSubgraph:null,civitasData:{nip:String(),ipfsHash:String()},civitasIpfs:null,dataContract:null,dataIpfs:null,previewImage:null}},computed:{fields:function(){return[{key:"key",label:"Informasi",_classes:"font-weight-bold text-capitalize",_style:"width:25%"},{key:"value",label:"Nilai"}]},cvtDataSubgraph:function(){var t=this.civita?Object.entries(this.civita):[["id","Not found"]];return t.map((function(t){var e=u(t,2),a=e[0],n=e[1];return{key:a,value:n}}))},cvtDataOnChain:function(){var t=this.civitasData?Object.entries(this.civitasData):[["id","Not found"]];return t.map((function(t){var e=u(t,2),a=e[0],n=e[1];return{key:a,value:n}}))},cvtDataIpfs:function(){var t=this.civitasIpfs?Object.entries(this.civitasIpfs):[["id","Not found"]];return t.map((function(t){var e=u(t,2),a=e[0],n=e[1];return{key:a,value:n}}))},visibleDataSubgraph:function(){return this.cvtDataSubgraph.filter((function(t){return"timeCreated"==t.key||"lastUpdated"==t.key?(t.value=new Date(1e3*t.value),t):(web3.utils.isHexStrict(t.value)&&(t.value=web3.utils.hexToUtf8(t.value)),"linkedAccount"==t.key&&(t.value=t.value?t.value.id:"Tidak Ada"),null==t.value||"__typename"==t.key?null:t)}))}},methods:{goBack:function(){this.$router.go(-1)}},beforeMount:function(){var t=this;web3.eth.getAccounts().then((function(e){o["a"].methods.getNIPCivitas(e[0]).call({from:e[0]}).then((function(e){e&&(web3.eth.getAccounts().then((function(a){o["a"].methods.getCivitas(e).call({from:a[0]}).then((function(e){e&&(t.civitasData.nip=web3.utils.hexToUtf8(e[0]),t.civitasData.ipfsHash=web3.utils.hexToUtf8(e[1]),t.dataContract=t.cvtDataOnChain,C.cat("/ipfs/"+t.civitasData.ipfsHash).then((function(e){t.civitasIpfs=JSON.parse(e.toString()),t.dataIpfs=t.cvtDataIpfs,C.cat("/ipfs/"+t.civitasIpfs.foto).then((function(e){var a=new Blob([e],{type:"image/png"}),n=URL.createObjectURL(a);t.previewImage=n}))})))}))})),t.$apollo.query({query:b,variables:{nip:e}}).then((function(e){t.civita=e.data.civita,t.dataSubgraph=t.visibleDataSubgraph})))}))}))}},g=y,w=a("2877"),I=Object(w["a"])(g,n,i,!1,null,null,null);e["default"]=I.exports}}]);
//# sourceMappingURL=chunk-2d22890c.29c99035.js.map