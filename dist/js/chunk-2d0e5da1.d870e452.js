(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e5da1"],{"95f5":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CRow",[n("CCol",{attrs:{col:"12",xl:"12"}},[n("CCard",[n("CCardHeader",[t._v("Daftar Antrian Kelulusan")]),n("CCardBody",[n("CDataTable",{attrs:{hover:"",items:t.filteredItems,fields:t.fields,"items-per-page":5,"active-page":t.activePage,pagination:{doubleArrows:!1,align:"center"},sorter:"",columnFilter:""},on:{"page-change":t.pageChange},scopedSlots:t._u([{key:"id-filter",fn:function(){return[n("input",{staticClass:"form-control form-control-sm",domProps:{value:t.filterNim},on:{change:t.setFilterId}})]},proxy:!0},{key:"id",fn:function(e){return[n("td",[t._v(t._s(t.hexToString(e.item.id)))])]}},{key:"name-filter",fn:function(){return[n("input",{staticClass:"form-control form-control-sm",domProps:{value:t.filterNama},on:{change:t.setFilterNama}})]},proxy:!0},{key:"name",fn:function(e){return[n("td",[t._v(t._s(t.hexToString(e.item.name)))])]}},{key:"prodi-filter",fn:function(){return[n("input",{staticClass:"form-control form-control-sm",domProps:{value:t.filterProdi},on:{change:t.setFilterProdi}})]},proxy:!0},{key:"prodi",fn:function(e){return[n("td",[t._v(t._s(t.hexToString(e.item.prodi)))])]}},{key:"isLulus",fn:function(e){return[n("td",[n("CBadge",{attrs:{color:e.item.isLulus?"success":"danger"}},[t._v(t._s(e.item.isLulus?"Lulus":"Belum"))])],1)]}},{key:"action",fn:function(e){return[n("td",[n("CCol",{staticClass:"mb-3 mb-xl-0 text-left"},[n("CButtonGroup",[n("CButton",{attrs:{color:"primary",size:"sm"},on:{click:function(n){return t.detailClicked(e.item)}}},[t._v("Detail")]),n("CButton",{staticClass:"mr-3",attrs:{color:"success",size:"sm"},on:{click:function(n){return t.openLulusModal(e.item)}}},[t._v("Luluskan")])],1)],1)],1)]}}])})],1)],1)],1),n("CModal",{attrs:{show:t.lulusModal,"no-close-on-backdrop":!0,centered:!0,title:"Luluskan Mahasiswa",md:"8",color:"success"},on:{"update:show":function(e){t.lulusModal=e}},scopedSlots:t._u([{key:"header",fn:function(){return[n("h6",{staticClass:"modal-title"},[t._v("Luluskan Mahasiswa")]),n("CButtonClose",{staticClass:"text-white",on:{click:function(e){t.lulusModal=!1}}})]},proxy:!0},{key:"footer",fn:function(){return[n("CButton",{attrs:{color:"danger"},on:{click:function(e){return t.confirmLulus(!1)}}},[t._v("Kembali")]),n("CButton",{attrs:{color:"success"},on:{click:function(e){return t.confirmLulus(!0)}}},[t._v("Konfirmasi")])]},proxy:!0}])},[n("CRow",[n("CCol",[n("CInput",{attrs:{label:"Name",horizontal:"",readonly:"",value:t.hexToString(t.selectedMhs.name)}}),n("CInput",{attrs:{label:"NIM",horizontal:"",readonly:"",value:t.hexToString(t.selectedMhs.id)}})],1)],1)],1)],1)},o=[],r=n("9530"),s=n.n(r),a=n("3f55");function l(){var t=u(["\n      query {\n        mahasiswas(where:{isLulus:false}){\n          id\n          name\n          prodi\n          isLulus\n        }\n      }\n    "]);return l=function(){return t},t}function u(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var c={name:"PelulusanMahasiswa",apollo:{mahasiswas:s()(l())},data:function(){return{fields:[{key:"id",label:"NIM"},{key:"name"},{key:"prodi"},{key:"isLulus",label:"Status Kelulusan",filter:!1},{key:"action",label:"Aksi",sorter:!1,filter:!1}],activePage:1,selectedMhs:{id:String(),name:String()},lulusModal:!1,filterNim:"",filterNama:"",filterProdi:""}},watch:{$route:{immediate:!0,handler:function(t){t.query&&t.query.page&&(this.activePage=Number(t.query.page))}}},mounted:function(){this.$apollo.queries.mahasiswas.refetch()},computed:{computedItems:function(){return this.mahasiswas},filteredItems:function(){var t=this;return this.mahasiswas?this.computedItems.filter((function(e){if(!t.filterNim&&!t.filterNama&&!t.filterProdi)return!0;var n=e.id,i=e.name,o=e.prodi;return web3.utils.hexToUtf8(n).toLowerCase().includes(t.filterNim.toLowerCase())&&web3.utils.hexToUtf8(i).toLowerCase().includes(t.filterNama.toLowerCase())&&web3.utils.hexToUtf8(o).toLowerCase().includes(t.filterProdi.toLowerCase())})):[]}},methods:{pageChange:function(t){this.$router.push({query:{page:t}})},detailClicked:function(t){this.$router.push({path:"mahasiswa/detail/"+"".concat(t.id)})},editClicked:function(t){this.$router.push({path:"mahasiswa/edit/"+"".concat(t.id)})},hexToString:function(t){if(web3.utils.isHexStrict(t))return web3.utils.hexToUtf8(t)},setFilterId:function(t){this.filterNim=t.target.value},setFilterNama:function(t){this.filterNama=t.target.value},setFilterProdi:function(t){this.filterProdi=t.target.value},luluskanMahasiswa:function(){var t=this.selectedMhs;web3.eth.getAccounts().then((function(e){a["a"].methods.setMahasiswaLulus(t.id,!0).send({from:e[0]}).on("error",(function(t,e){console.log(t)})).on("transactionHash",(function(t){console.log(t.contractAddress)}))}))},openLulusModal:function(t){this.lulusModal=!0,this.selectedMhs=t},confirmLulus:function(t){this.lulusModal=!1,t&&this.luluskanMahasiswa()}}},f=c,d=n("2877"),m=Object(d["a"])(f,i,o,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0e5da1.d870e452.js.map