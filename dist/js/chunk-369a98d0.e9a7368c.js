(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-369a98d0"],{"7c5d":function(e,t,n){"use strict";(function(e){var a=n("a357"),i=n("9530"),s=n.n(i);function u(){var e=d(["\n      query {\n        dosens {\n          id\n          name\n        }\n      }\n    "]);return u=function(){return e},e}function r(){var e=d(["\n      query {\n        mataKuliahs {\n          id\n          namaMatkul\n        }\n      }\n    "]);return r=function(){return e},e}function l(){var e=d(["\n      query {\n        prodis {\n          id\n          namaProdi\n          namaJurusan\n        }\n      }\n    "]);return l=function(){return e},e}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n("94e4"),p=o({host:"ipfs.infura.io",port:5001,protocol:"https"});t["a"]={name:"TambahSemester",apollo:{prodis:s()(l()),mataKuliahs:s()(r()),dosens:s()(u())},data:function(){return{listMatkul:[],indexMatkul:null,indexDosen:null,semesterKeOptions:[1,2,3,4,5,6,7,8],sksOptions:[1,2,3,4,5,6,7,8,9,10,11,12],confirmModal:!1,successModal:!1,dismissSuccess:0,dismissFail:0,calendar:{tahunAjar:null,ganjil:null},semester:{semesterKe:Number(),kelas:null,totalSks:Number(),idKalendar:Number(),prodi:null,jurusan:null}}},computed:{prodiOptions:function(){var e=[];return this.prodis.forEach((function(t){e.push({label:web3.utils.hexToUtf8(t.namaProdi),value:t.id})})),e},matkulOptions:function(){var e=[];return this.mataKuliahs.forEach((function(t){e.push({label:web3.utils.hexToUtf8(t.namaMatkul),value:Number(t.id)})})),e},dosenOptions:function(){var e=[];return this.dosens.forEach((function(t){e.push({label:web3.utils.hexToUtf8(t.name),value:Number(t.id)})})),e},ready:function(){return null!=this.prodis&&null!=this.calendar.tahunAjar&&null!=this.mataKuliahs&&null!=this.dosens}},methods:{goBack:function(){this.$router.go(-1)},createSemester:function(){var t=this,n=this.semester;if(this.isDataReady(this.semester)&&this.isPerkuliahanReady(this.listMatkul)){var i=[],s=[],u=[],r=0;n.ampu=[],n.totalSks=0,this.listMatkul.forEach((function(e){r=e.sks,n.totalSks+=r,n.ampu.push({matkul:e.matkul,sks:r,dosen:[]}),e.dosen.forEach((function(t){s.push(e.matkul),i.push(t.id),u.push(r),r=0,n.ampu[n.ampu.length-1].dosen.push(t.id)}))}));var l=e.from(JSON.stringify(n));p.add(l).then((function(e){var r=e[0].hash;web3.eth.getAccounts().then((function(e){return a["a"].methods.createSemester(n.semesterKe,web3.utils.utf8ToHex(r),i,s,u,t.prodis[n.prodi].namaProdi,web3.utils.utf8ToHex(n.kelas)).send({from:e[0]}).on("error",(function(e,t){console.log(e)})).on("transactionHash",(function(e){console.log(e)}))}))}))}},validator:function(e){return!!e&&e.length>1},inputValidator:function(e){return!!e},getSemester:function(e){return null==e?"":e?"Ganjil":"Genap"},confirmRegister:function(e){this.confirmModal=!1,e&&this.createSemester()},showAlert:function(e){e?this.dismissSuccess=5:this.dismissFail=5},addMatkul:function(){this.listMatkul.push({matkul:null,sks:null,dosen:[{id:null}]})},addDosen:function(e){if(this.listMatkul[e].dosen.length>3)return null;this.listMatkul[e].dosen.push({id:null})},deleteMatkul:function(e){this.listMatkul.splice(e,1)},deleteDosen:function(e,t){if(this.listMatkul[e].dosen.length<=1)return null;this.listMatkul[e].dosen.splice(t,1)},updateJurusan:function(){this.semester.jurusan=web3.utils.hexToUtf8(this.prodis[this.semester.prodi].namaJurusan)},isDataReady:function(e){var t=!0;return Object.keys(e).forEach((function(n){"string"==typeof e[n]?""==e[n]&&(t=!1):(null==e[n]||0==e["semesterKe"])&&(t=!1)})),t},isPerkuliahanReady:function(e){var t=!0,n=[];return e.forEach((function(e){var a=[];e.dosen.forEach((function(e){(null==e.id||a.includes(e.id))&&(t=!1),a.push(e.id)})),(null==e.matkul||null==e.sks||n.includes(e.matkul))&&(t=!1),n.push(e.matkul)})),t}},beforeMount:function(){var e=this;web3.eth.getAccounts().then((function(t){var n=e.calendar,i=e.semester;a["a"].methods.activeKalendarAkademik().call({from:t[0]}).then((function(e){e&&(i.idKalendar=e,a["a"].methods.getKalendarAkademik(e).call({from:t[0]}).then((function(e){n.tahunAjar=web3.utils.hexToUtf8(e[0]),n.ganjil=e[1]})))}))}))}}}).call(this,n("b639").Buffer)},a357:function(e,t,n){"use strict";var a=n("8792"),i="0x5d658f5ad22cf59d582fd288096ead47f660fc89",s=[{inputs:[{internalType:"address",name:"accountManagerAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"address",name:"oldAddress",type:"address"},{indexed:!1,internalType:"address",name:"newAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"timeUpdated",type:"uint256"}],name:"AccountManagerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"ID",type:"uint256"},{indexed:!1,internalType:"bytes9",name:"tahunAjar",type:"bytes9"},{indexed:!1,internalType:"bool",name:"ganjil",type:"bool"},{indexed:!1,internalType:"uint256",name:"timeCreated",type:"uint256"}],name:"KalendarAkademikCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"ID",type:"uint256"},{indexed:!1,internalType:"bytes9",name:"newtahunAjar",type:"bytes9"},{indexed:!1,internalType:"bytes9",name:"oldtahunAjar",type:"bytes9"},{indexed:!1,internalType:"uint256",name:"timeUpdated",type:"uint256"}],name:"KalendarAkademikTahunAjarUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"ID",type:"uint256"},{indexed:!1,internalType:"bytes",name:"namaMatkul",type:"bytes"},{indexed:!1,internalType:"uint256",name:"timeCreated",type:"uint256"}],name:"MatkulCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"ID",type:"uint256"},{indexed:!1,internalType:"bytes",name:"namaMatkul",type:"bytes"},{indexed:!1,internalType:"bytes",name:"newIpfsHash",type:"bytes"},{indexed:!1,internalType:"bytes",name:"oldIpfsHash",type:"bytes"},{indexed:!1,internalType:"uint256",name:"timeUpdated",type:"uint256"}],name:"MatkulUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"ID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"idDosen",type:"uint256"},{indexed:!1,internalType:"uint256",name:"idMatkul",type:"uint256"},{indexed:!1,internalType:"bytes",name:"namaMatkul",type:"bytes"},{indexed:!1,internalType:"uint256",name:"idSemester",type:"uint256"},{indexed:!1,internalType:"bytes",name:"prodi",type:"bytes"},{indexed:!1,internalType:"bytes9",name:"kelas",type:"bytes9"},{indexed:!1,internalType:"uint256",name:"timeCreated",type:"uint256"}],name:"MengajarCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"ID",type:"uint256"},{indexed:!1,internalType:"bytes",name:"namaProdi",type:"bytes"},{indexed:!1,internalType:"bytes",name:"namaJurusan",type:"bytes"},{indexed:!1,internalType:"uint256",name:"timeCreated",type:"uint256"}],name:"ProdiCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"ID",type:"uint256"},{indexed:!1,internalType:"bytes",name:"namaProdi",type:"bytes"},{indexed:!1,internalType:"bytes",name:"namaJurusan",type:"bytes"},{indexed:!1,internalType:"bytes",name:"newIpfsHash",type:"bytes"},{indexed:!1,internalType:"bytes",name:"oldIpfsHash",type:"bytes"},{indexed:!1,internalType:"uint256",name:"timeUpdated",type:"uint256"}],name:"ProdiUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"ID",type:"uint256"},{indexed:!1,internalType:"uint8",name:"semesterKe",type:"uint8"},{indexed:!1,internalType:"bytes",name:"prodi",type:"bytes"},{indexed:!1,internalType:"bytes9",name:"kelas",type:"bytes9"},{indexed:!1,internalType:"uint256",name:"kalendarAkademik",type:"uint256"},{indexed:!1,internalType:"bool",name:"statusPenilaian",type:"bool"},{indexed:!1,internalType:"uint256",name:"timeCreated",type:"uint256"}],name:"SemesterCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"ID",type:"uint256"},{indexed:!1,internalType:"bool",name:"status",type:"bool"},{indexed:!1,internalType:"uint256",name:"timeChanged",type:"uint256"}],name:"SemesterNilaiStatusChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"ID",type:"uint256"},{indexed:!1,internalType:"bytes",name:"newIpfsHash",type:"bytes"},{indexed:!1,internalType:"bytes",name:"oldIpfsHash",type:"bytes"},{indexed:!1,internalType:"uint256",name:"timeUpdated",type:"uint256"}],name:"SemesterUpdated",type:"event"},{inputs:[],name:"activeKalendarAkademik",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes9",name:"_tahunAjar",type:"bytes9"},{internalType:"bool",name:"_ganjil",type:"bool"}],name:"createKalendarAkademik",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"_namaMatkul",type:"bytes"},{internalType:"bytes",name:"_ipfsHash",type:"bytes"}],name:"createMatkul",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"_namaProdi",type:"bytes"},{internalType:"bytes",name:"_namaJurusan",type:"bytes"},{internalType:"bytes",name:"_ipfsHash",type:"bytes"}],name:"createProdi",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint8",name:"_semesterKe",type:"uint8"},{internalType:"bytes",name:"_ipfsHash",type:"bytes"},{internalType:"uint256[]",name:"_listIdDosen",type:"uint256[]"},{internalType:"uint256[]",name:"_listMatkul",type:"uint256[]"},{internalType:"uint8[]",name:"_listSKS",type:"uint8[]"},{internalType:"bytes",name:"_prodi",type:"bytes"},{internalType:"bytes9",name:"_kelas",type:"bytes9"}],name:"createSemester",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"getAmpu",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"getKalendarAkademik",outputs:[{internalType:"bytes9",name:"",type:"bytes9"},{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"getMatkul",outputs:[{internalType:"bytes",name:"",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"getProgram",outputs:[{internalType:"bytes",name:"",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"getSemester",outputs:[{internalType:"uint8",name:"",type:"uint8"},{internalType:"bytes",name:"",type:"bytes"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idAmpu",type:"uint256"},{internalType:"uint256",name:"idDosen",type:"uint256"}],name:"isDosenPengampu",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes9",name:"_tahunAjar",type:"bytes9"},{internalType:"bool",name:"_ganjil",type:"bool"}],name:"isKalendarAkademikExist",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"isStatusSemesterOpen",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"setKalendarActive",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_semesterId",type:"uint256"},{internalType:"bool",name:"_status",type:"bool"}],name:"ubahStatusNilaiSemester",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAddress",type:"address"}],name:"updateAccountManager",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_matkulId",type:"uint256"},{internalType:"bytes",name:"_newIpfsHash",type:"bytes"},{internalType:"bytes",name:"_namaMatkul",type:"bytes"}],name:"updateMatkulData",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_prodiId",type:"uint256"},{internalType:"bytes",name:"_newIpfsHash",type:"bytes"},{internalType:"bytes",name:"_namaProdi",type:"bytes"},{internalType:"bytes",name:"_namaJurusan",type:"bytes"}],name:"updateProdiData",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_semesterId",type:"uint256"},{internalType:"bytes",name:"_newIpfsHash",type:"bytes"}],name:"updateSemesterData",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"bytes9",name:"_tahunAjar",type:"bytes9"}],name:"updateTahunAjarKalendar",outputs:[],stateMutability:"nonpayable",type:"function"}],u=new a["a"].eth.Contract(s,i);t["a"]=u},c0c7:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex min-vh-100"},[n("CContainer",{attrs:{fluid:""}},[n("CRow",{staticClass:"justify-content-center"},[n("CCol",{attrs:{md:"8"}},[n("CAlert",{attrs:{show:e.dismissSuccess,closeButton:"",color:"success",fade:""},on:{"update:show":function(t){e.dismissSuccess=t}}},[e._v("Semester berhasil ditambahkan.")]),n("CAlert",{attrs:{show:e.dismissFail,closeButton:"",color:"danger",fade:""},on:{"update:show":function(t){e.dismissFail=t}}},[n("strong",[e._v("Permintaan Gagal")]),e._v(" : "+e._s(e.dismissFail)+" ")])],1),n("CCol",{attrs:{md:"12",show:e.ready}},[n("CCard",{staticClass:"mx-4 mb-5"},[n("CCardBody",{staticClass:"p-4"},[n("CForm",[n("h2",{staticClass:"mb-3"},[e._v("Tambah Semester")]),n("CRow",[n("CCol",{attrs:{sm:"8"}},[n("CInput",{attrs:{label:"Tahun Ajar",disabled:"",value:e.calendar.tahunAjar}}),n("CInput",{attrs:{label:"Semester",disabled:"",value:e.getSemester(this.calendar.ganjil)}}),n("CSelect",{attrs:{label:"Prodi",options:e.prodiOptions,placeholder:"Pilih Prodi",value:e.semester.prodi,"is-valid":e.inputValidator(this.semester.prodi),required:""},on:{"update:value":[function(t){return e.$set(e.semester,"prodi",t)},e.updateJurusan]}}),n("CInput",{attrs:{label:"Jurusan",disabled:"",value:e.semester.jurusan},on:{"update:value":function(t){return e.$set(e.semester,"jurusan",t)}}}),n("CRow",[n("CCol",{attrs:{sm:"8"}},[n("CInput",{attrs:{label:"Kelas",value:e.semester.kelas,placeholder:"cth. 1A","is-valid":e.validator,"invalid-feedback":"Data tidak boleh kosong."},on:{"update:value":function(t){return e.$set(e.semester,"kelas",t)}}})],1),n("CCol",{attrs:{sm:"4"}},[n("CSelect",{attrs:{label:"Semester",options:e.semesterKeOptions,value:e.semester.semesterKe,placeholder:"Semester Ke","is-valid":e.inputValidator(this.semester.semesterKe)},on:{"update:value":function(t){return e.$set(e.semester,"semesterKe",t)}}})],1)],1),n("h3",{staticClass:"mb-3"},[e._v("Perkuliahan")]),e._l(e.listMatkul,(function(t,a){return[n("div",{key:a,staticClass:"justify-content-center"},[n("CCard",[n("CCardHeader",[e._v(" Mata Kuliah #"+e._s(a+1)+" "),n("div",{staticClass:"card-header-actions"},[n("CLink",{staticClass:"card-header-action btn-close",attrs:{href:"#"},on:{click:function(t){return e.deleteMatkul(a)}}},[n("CIcon",{attrs:{name:"cil-x-circle"}})],1)],1)]),n("CCardBody",[n("CForm",[n("CRow",[n("CCol",{attrs:{md:"6"}},[n("CSelect",{attrs:{options:e.matkulOptions,placeholder:"Pilih Mata Kuliah",required:"",value:e.listMatkul[a].matkul},on:{"update:value":function(t){return e.$set(e.listMatkul[a],"matkul",t)}}})],1),n("CCol",{attrs:{md:"6"}},[e._l(e.listMatkul[a].dosen,(function(t,i){return[n("CRow",{key:i},[n("CCol",{attrs:{md:"9"}},[n("CSelect",{attrs:{options:e.dosenOptions,placeholder:"Pilih Dosen",required:"",value:e.listMatkul[a].dosen[i].id},on:{"update:value":function(t){return e.$set(e.listMatkul[a].dosen[i],"id",t)}}})],1),i?n("CCol",{attrs:{md:"2"}},[n("CButton",{attrs:{color:"danger"},on:{click:function(t){return e.deleteDosen(a,i)}}},[n("CIcon",{attrs:{name:"cil-x"}})],1)],1):e._e()],1)]})),n("CRow",{staticClass:"justify-content-center"},[n("CButton",{attrs:{color:"success"},on:{click:function(t){return e.addDosen(a)}}},[e._v("Tambah Dosen")])],1)],2),n("CCol",{attrs:{md:"6"}},[n("CSelect",{attrs:{options:e.sksOptions,placeholder:"Pilih SKS",required:"",value:e.listMatkul[a].sks},on:{"update:value":function(t){return e.$set(e.listMatkul[a],"sks",t)}}})],1)],1)],1)],1)],1)],1)]})),n("CRow",{staticClass:"justify-content-center"},[n("CCol",{attrs:{sm:"4"}},[n("CButton",{attrs:{color:"success"},on:{click:e.addMatkul}},[e._v("Tambah Perkuliahan")])],1)],1)],2)],1)],1)],1),n("CCardFooter",[n("CRow",{staticClass:"justify-content-center"},[n("CCol",{attrs:{sm:"4"}},[n("CButton",{attrs:{color:"danger",block:""},on:{click:e.goBack}},[e._v("Kembali")])],1),n("CCol",{attrs:{sm:"4"}},[n("CButton",{attrs:{color:"success",block:""},on:{click:function(t){e.confirmModal=!0}}},[e._v("Tambah Semester")])],1)],1)],1)],1)],1)],1)],1),n("CModal",{attrs:{show:e.confirmModal,"no-close-on-backdrop":!0,centered:!0,title:"Konfirmasi",size:"sm",color:"dark"},on:{"update:show":function(t){e.confirmModal=t}},scopedSlots:e._u([{key:"header",fn:function(){return[n("h6",{staticClass:"modal-title"},[e._v("Konfirmasi")]),n("CButtonClose",{staticClass:"text-white",on:{click:function(t){e.confirmModal=!1}}})]},proxy:!0},{key:"footer",fn:function(){return[n("CButton",{attrs:{color:"danger"},on:{click:function(t){return e.confirmRegister(!1)}}},[e._v("Kembali")]),n("CButton",{attrs:{color:"success"},on:{click:function(t){return e.confirmRegister(!0)}}},[e._v("Konfirmasi")])]},proxy:!0}])},[e._v(" Apakah data telah sesuai? ")])],1)},i=[],s=n("7c5d"),u=s["a"],r=n("2877"),l=Object(r["a"])(u,a,i,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-369a98d0.e9a7368c.js.map