(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ddbf006"],{"34bc":function(a,t,i){"use strict";(function(a){var e=i("3f55"),s=i("9530"),n=i.n(s);function o(){var a=r(["\n      query {\n        prodis {\n          id\n          namaProdi\n        }\n      }\n    "]);return o=function(){return a},a}function r(a,t){return t||(t=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(t)}}))}var l=i("94e4"),u=l({host:"ipfs.infura.io",port:5001,protocol:"https"});t["a"]={name:"TambahMahasiswa",beforeRouteEnter:function(a,t,i){i((function(a){a.usersOpened=t.fullPath}))},apollo:{prodis:n()(o())},data:function(){return{usersOpened:null,genderOptions:["Laki-laki","Perempuan"],confirmModal:!1,dismissSuccess:0,dismissFail:0,image:null,previewImage:null,mahasiswaData:{},mahasiswa:{nama:String(),nim:String(),nik:String(),jenisKelamin:String(),tempatLahir:String(),tanggalLahir:null,prodi:String(),noTelp:String(),email:String(),foto:String()},isDataLoaded:!1}},computed:{prodiOptions:function(){var a=[];return this.prodis.forEach((function(t){a.push({label:web3.utils.hexToUtf8(t.namaProdi),value:web3.utils.hexToUtf8(t.namaProdi)})})),a}},beforeMount:function(){var a=this,t=this;web3.eth.getAccounts().then((function(i){e["a"].methods.getMahasiswa(a.$route.params.id).call({from:i[0]}).then((function(a){a&&(t.mahasiswaData.nim=web3.utils.hexToUtf8(a[0]),t.mahasiswaData.ipfsHash=web3.utils.hexToUtf8(a[1]),t.isDataLoaded=!0,u.cat("/ipfs/"+t.mahasiswaData.ipfsHash).then((function(a){t.mahasiswa=JSON.parse(a.toString()),u.cat("/ipfs/"+t.mahasiswa.foto).then((function(a){var i=new Blob([a],{type:"image/png"}),e=URL.createObjectURL(i);t.previewImage=e}))})))}))}))},methods:{goBack:function(){this.$router.go(-1)},updateMahasiswa:function(){if(this.isDataReady(this.mahasiswa)){var t=this.mahasiswaData,i=this.mahasiswa,s=a.from(JSON.stringify(i));u.add(s).then((function(a){web3.eth.getAccounts().then((function(s){var n=a[0].hash;i.nim!=t.nim?(e["a"].methods.updateNIMMahasiswa(web3.utils.utf8ToHex(t.nim),web3.utils.utf8ToHex(i.nim)).send({from:s[0]}).on("error",(function(a,t){console.log(a)})).on("transactionHash",(function(a){console.log(a)})),e["a"].methods.updateMahasiswaData(web3.utils.utf8ToHex(i.nim),web3.utils.utf8ToHex(i.nama),web3.utils.utf8ToHex(n)).send({from:s[0]}).on("error",(function(a,t){console.log(a)})).on("transactionHash",(function(a){console.log(a)}))):e["a"].methods.updateMahasiswaData(web3.utils.utf8ToHex(i.nim),web3.utils.utf8ToHex(i.nama),web3.utils.utf8ToHex(n)).send({from:s[0]}).on("error",(function(a,t){console.log(a)})).on("transactionHash",(function(a){console.log(a)}))}))}))}},previewFiles:function(a){this.image=a[0]},uploadImage:function(){var a=this;u.add(this.image).then((function(t){var i=t[0].hash;a.mahasiswa.foto=i,u.cat("/ipfs/"+i).then((function(t){var i=new Blob([t],{type:"image/png"}),e=URL.createObjectURL(i);a.previewImage=e}))}))},isDataReady:function(a){var t=!0;return Object.keys(a).filter((function(a){return a})).forEach((function(i){(null==a[i]||""==a[i]&&"statusKelulusan"!=i)&&(t=!1)})),t},validator:function(a){return!!a&&a.length>1},inputValidator:function(a){return!!a},confirmRegister:function(a){this.confirmModal=!1,a&&this.updateMahasiswa()},showAlert:function(a){a?this.dismissSuccess=5:this.dismissFail=5}}}}).call(this,i("b639").Buffer)},"6a82":function(a,t,i){"use strict";i.r(t);var e=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",{staticClass:"d-flex min-vh-100"},[i("CContainer",{attrs:{fluid:""}},[i("CRow",{staticClass:"justify-content-center"},[i("CCol",{attrs:{md:"8"}},[i("CAlert",{attrs:{show:a.dismissSuccess,closeButton:"",color:"success",fade:""},on:{"update:show":function(t){a.dismissSuccess=t}}},[a._v("Update Data Mahasiswa Berhasil.")]),i("CAlert",{attrs:{show:a.dismissFail,closeButton:"",color:"danger",fade:""},on:{"update:show":function(t){a.dismissFail=t}}},[i("strong",[a._v("Permintaan Gagal")]),a._v(" : "+a._s(a.dismissFail)+" ")])],1),i("CCol",{attrs:{md:"12"}},[i("CCard",{staticClass:"mx-4 mb-5"},[i("CCardBody",{staticClass:"p-4"},[i("CForm",[i("h2",{staticClass:"mb-3"},[a._v("Edit Mahasiswa")]),i("CRow",[this.isDataLoaded?i("CCol",{attrs:{sm:"8"}},[i("CInput",{attrs:{label:"Nama Lengkap",required:"","is-valid":a.validator,"invalid-feedback":"Data tidak boleh kosong.",value:a.mahasiswa.nama},on:{"update:value":function(t){return a.$set(a.mahasiswa,"nama",t)}}}),i("CSelect",{attrs:{label:"Jenis Kelamin",options:a.genderOptions,placeholder:"Pilih Jenis Kelamin","is-valid":a.inputValidator(this.mahasiswa.jenisKelamin),value:a.mahasiswa.jenisKelamin,required:""},on:{"update:value":function(t){return a.$set(a.mahasiswa,"jenisKelamin",t)}}}),i("CInput",{attrs:{label:"NIM",required:"","is-valid":a.validator,"invalid-feedback":"Data tidak boleh kosong.",value:a.mahasiswa.nim},on:{"update:value":function(t){return a.$set(a.mahasiswa,"nim",t)}}}),i("CInput",{attrs:{label:"NIK",required:"","is-valid":a.validator,"invalid-feedback":"Data tidak boleh kosong.",value:a.mahasiswa.nik},on:{"update:value":function(t){return a.$set(a.mahasiswa,"nik",t)}}}),i("CRow",[i("CCol",{attrs:{sm:"8"}},[i("CInput",{attrs:{label:"Tempat Lahir",placeholder:"Kota Lahir","is-valid":a.validator,"invalid-feedback":"Data tidak boleh kosong.",value:a.mahasiswa.tempatLahir},on:{"update:value":function(t){return a.$set(a.mahasiswa,"tempatLahir",t)}}})],1),i("CCol",{attrs:{sm:"4"}},[i("CInput",{attrs:{label:"Tanggal Lahir",type:"date","is-valid":a.inputValidator(this.mahasiswa.tanggalLahir),value:a.mahasiswa.tanggalLahir},on:{"update:value":function(t){return a.$set(a.mahasiswa,"tanggalLahir",t)}}})],1)],1),i("CInput",{attrs:{label:"Email",required:"","is-valid":a.validator,"invalid-feedback":"Data tidak boleh kosong.",value:a.mahasiswa.email},on:{"update:value":function(t){return a.$set(a.mahasiswa,"email",t)}}}),i("CInput",{attrs:{label:"No. Telepon",required:"","is-valid":a.validator,"invalid-feedback":"Data tidak boleh kosong.",value:a.mahasiswa.noTelp},on:{"update:value":function(t){return a.$set(a.mahasiswa,"noTelp",t)}}}),this.prodis?i("CSelect",{attrs:{label:"Prodi",options:a.prodiOptions,placeholder:"Pilih Prodi","is-valid":a.inputValidator(this.mahasiswa.prodi),value:a.mahasiswa.prodi,required:""},on:{"update:value":function(t){return a.$set(a.mahasiswa,"prodi",t)}}}):a._e()],1):a._e(),this.previewImage?i("CCol",[i("CCard",{staticClass:"mt-4"},[i("CCardHeader",[a._v("Ganti Foto")]),i("CCardBody",{staticClass:"p-1 m-2"},[null==a.previewImage?i("div",[i("svg",{staticClass:"d-block w-100 h-1 00 img-fluid",staticStyle:{"background-color":"grey"}})]):a._e(),a.previewImage?i("div",[i("img",{staticClass:"d-block w-100 h-1 00 img-fluid",attrs:{src:a.previewImage}})]):a._e()]),i("CCardFooter",[i("CInputFile",{attrs:{placeholder:"Pilih Gambar",accept:"image/x-png, image/jpeg, image/bmp"},on:{change:a.previewFiles}}),i("CButton",{attrs:{color:"info",block:""},on:{click:a.uploadImage}},[a._v("Upload")])],1)],1)],1):a._e()],1)],1)],1),i("CCardFooter",[i("CRow",{staticClass:"justify-content-center"},[i("CCol",{attrs:{sm:"4"}},[i("CButton",{attrs:{color:"danger",block:""},on:{click:a.goBack}},[a._v("Kembali")])],1),i("CCol",{attrs:{sm:"4"}},[a.isDataReady&&a.previewImage?a._e():i("CButton",{attrs:{color:"success",block:"",disabled:""}},[a._v("Konfirmasi Edit")]),a.isDataReady&&a.previewImage?i("CButton",{attrs:{color:"success",block:""},on:{click:function(t){a.confirmModal=!0}}},[a._v("Konfirmasi Edit")]):a._e()],1)],1)],1)],1)],1)],1)],1),i("CModal",{attrs:{show:a.confirmModal,"no-close-on-backdrop":!0,centered:!0,title:"Konfirmasi",size:"sm",color:"dark"},on:{"update:show":function(t){a.confirmModal=t}},scopedSlots:a._u([{key:"header",fn:function(){return[i("h6",{staticClass:"modal-title"},[a._v("Konfirmasi")]),i("CButtonClose",{staticClass:"text-white",on:{click:function(t){a.confirmModal=!1}}})]},proxy:!0},{key:"footer",fn:function(){return[i("CButton",{attrs:{color:"danger"},on:{click:function(t){return a.confirmRegister(!1)}}},[a._v("Kembali")]),i("CButton",{attrs:{color:"success"},on:{click:function(t){return a.confirmRegister(!0)}}},[a._v("Konfirmasi")])]},proxy:!0}])},[a._v(" Apakah data telah sesuai? ")])],1)},s=[],n=i("34bc"),o=n["a"],r=i("2877"),l=Object(r["a"])(o,e,s,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2ddbf006.b187e1c3.js.map