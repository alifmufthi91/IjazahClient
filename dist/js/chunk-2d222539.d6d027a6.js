(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d222539"],{cdac:function(t,a,e){"use strict";e.r(a),e.d(a,"GET_MAHASISWA",(function(){return v})),e.d(a,"GET_STUDI",(function(){return y}));var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("CRow",[e("CCol",{attrs:{col:"12"}},[e("CCard",[e("CCardHeader",[t._v("Informasi Mahasiswa")]),e("CCardBody",[e("h5",[t._v("Data On-Chain")]),e("CDataTable",{attrs:{striped:"",small:"",fixed:"",items:t.dataContract,fields:t.fields}}),e("h5",[t._v("Data Off-Chain (Subgraph)")]),e("CDataTable",{attrs:{striped:"",small:"",fixed:"",items:t.dataSubgraph,fields:t.fields}}),e("h5",[t._v("Data Off-Chain (IPFS)")]),e("CDataTable",{attrs:{striped:"",small:"",fixed:"",items:t.dataIpfs,fields:t.fields}}),e("CRow",{staticClass:"justify-content-center"},[e("CCol",{attrs:{sm:"3"}},[e("CCard",[e("CCardBody",[t.previewImage?t._e():e("div",[e("CProgress",{staticClass:"mt-1",staticStyle:{height:"20px"},attrs:{color:"success",value:100,animated:""}})],1),t.previewImage?e("div",[e("img",{staticClass:"d-block w-100 h-100 img-fluid",attrs:{src:t.previewImage}})]):t._e()])],1)],1)],1),e("h5",[t._v("Riwayat Studi (Subgraph)")]),e("CDataTable",{attrs:{striped:"",small:"",fixed:"",items:t.riwayatStudis,fields:t.studiFields},scopedSlots:t._u([{key:"mataKuliah",fn:function(a){return[e("td",[t._v(t._s(a.item.ampu?t.hexToUtf8(a.item.ampu.namaMatkul):""))])]}},{key:"nilai",fn:function(a){return[e("td",[t._v(t._s(t.hexToUtf8(a.item.nilai)))])]}},{key:"timeUpdated",fn:function(a){return[e("td",[t._v(t._s(t.unixToDate(a.item.timeUpdated)))])]}}])})],1),e("CCardFooter",[e("CButton",{attrs:{color:"primary"},on:{click:t.goBack}},[t._v("Back")])],1)],1)],1)],1)},i=[],r=e("9530"),s=e.n(r),u=e("3f55");function o(t,a){return h(t)||c(t,a)||f(t,a)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t,a){if(t){if("string"===typeof t)return d(t,a);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?d(t,a):void 0}}function d(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=t[e];return n}function c(t,a){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var e=[],n=!0,i=!1,r=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done);n=!0)if(e.push(s.value),a&&e.length===a)break}catch(o){i=!0,r=o}finally{try{n||null==u["return"]||u["return"]()}finally{if(i)throw r}}return e}}function h(t){if(Array.isArray(t))return t}function m(){var t=w(["\n  query riwayatStudis($nim: ID!) {\n    riwayatStudis(where: { nim: $nim }) {\n      id\n      ampu {\n        id\n        namaMatkul\n      }\n      nilai\n      timeUpdated\n    }\n  }\n"]);return m=function(){return t},t}function p(){var t=w(["\n  query mahasiswa($nim: ID!) {\n    mahasiswa(id: $nim) {\n      id\n      name\n      prodi\n      isLulus\n      isAssignedNINA\n      isUpdatedNINAData\n      linkedAccount {\n        id\n      }\n      timeCreated\n      lastUpdated\n    }\n  }\n"]);return p=function(){return t},t}function w(t,a){return a||(a=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(a)}}))}var v=s()(p()),y=s()(m()),b=e("94e4"),g=b({host:"ipfs.infura.io",port:5001,protocol:"https"}),C={name:"InfoMahasiswa",beforeRouteEnter:function(t,a,e){e((function(t){t.usersOpened=a.fullPath}))},data:function(){return{usersOpened:null,dataSubgraph:null,mahasiswaData:{nim:String(),ipfsHash:String()},mahasiswaIpfs:null,dataContract:null,dataIpfs:null,previewImage:null,riwayatStudis:null}},computed:{fields:function(){return[{key:"key",label:"Informasi",_classes:"font-weight-bold text-capitalize",_style:"width:25%"},{key:"value",label:"Nilai"}]},studiFields:function(){return[{key:"id",_style:"width:5%"},{key:"mataKuliah"},{key:"nilai",_style:"width:5%"},{key:"timeUpdated"}]},mhsDataSubgraph:function(){var t=this.mahasiswa?Object.entries(this.mahasiswa):[["id","Not found"]];return t.map((function(t){var a=o(t,2),e=a[0],n=a[1];return{key:e,value:n}}))},mhsDataOnChain:function(){var t=this.mahasiswaData?Object.entries(this.mahasiswaData):[["id","Not found"]];return t.map((function(t){var a=o(t,2),e=a[0],n=a[1];return{key:e,value:n}}))},mhsDataIpfs:function(){var t=this.mahasiswaIpfs?Object.entries(this.mahasiswaIpfs):[["id","Not found"]];return t.map((function(t){var a=o(t,2),e=a[0],n=a[1];return{key:e,value:n}}))},visibleDataSubgraph:function(){return this.mhsDataSubgraph.filter((function(t){return"timeCreated"==t.key||"lastUpdated"==t.key?(t.value=new Date(1e3*t.value),t):(web3.utils.isHexStrict(t.value)&&(t.value=web3.utils.hexToUtf8(t.value)),"linkedAccount"==t.key&&(t.value=t.value?t.value.id:"Tidak Ada"),null==t.value||"__typename"==t.key?null:t)}))}},methods:{goBack:function(){this.$router.go(-1)},hexToUtf8:function(t){return web3.utils.hexToUtf8(t)},unixToDate:function(t){var a=new Date(1e3*t);return a.toString()}},beforeMount:function(){var t=this;web3.eth.getAccounts().then((function(a){u["a"].methods.getNIMMahasiswa(a[0]).call({from:a[0]}).then((function(e){e&&(t.$apollo.query({query:v,variables:{nim:e}}).then((function(a){t.mahasiswa=a.data.mahasiswa,t.dataSubgraph=t.visibleDataSubgraph})),u["a"].methods.getMahasiswa(e).call({from:a[0]}).then((function(a){a&&(t.mahasiswaData.nim=web3.utils.hexToUtf8(a[0]),t.mahasiswaData.ipfsHash=web3.utils.hexToUtf8(a[1]),t.dataContract=t.mhsDataOnChain,g.cat("/ipfs/"+t.mahasiswaData.ipfsHash).then((function(a){t.mahasiswaIpfs=JSON.parse(a.toString()),t.dataIpfs=t.mhsDataIpfs,g.cat("/ipfs/"+t.mahasiswaIpfs.foto).then((function(a){var e=new Blob([a],{type:"image/png"}),n=URL.createObjectURL(e);t.previewImage=n}))})))})),t.$apollo.query({query:y,variables:{nim:e}}).then((function(a){t.riwayatStudis=a.data.riwayatStudis})))}))}))}},S=C,k=e("2877"),D=Object(k["a"])(S,n,i,!1,null,null,null);a["default"]=D.exports}}]);
//# sourceMappingURL=chunk-2d222539.d6d027a6.js.map