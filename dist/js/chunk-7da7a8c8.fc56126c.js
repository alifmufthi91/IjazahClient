(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7da7a8c8"],{"04af":function(a,i,t){"use strict";(function(a){var e=t("3f55"),s=t("9530"),n=t.n(s);function o(){var a=r(["\n      query {\n        prodis {\n          id\n          namaProdi\n        }\n      }\n    "]);return o=function(){return a},a}function r(a,i){return i||(i=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(i)}}))}var l=t("94e4"),u=l({host:"ipfs.infura.io",port:5001,protocol:"https"});i["a"]={name:"TambahMahasiswa",apollo:{prodis:n()(o())},data:function(){return{genderOptions:["Laki-laki","Perempuan"],confirmModal:!1,dismissSuccess:0,dismissFail:0,image:null,previewImage:null,mahasiswa:{nama:String(),nim:String(),nik:String(),jenisKelamin:String(),tempatLahir:String(),tanggalLahir:null,prodi:String(),noTelp:String(),email:String(),foto:String()}}},computed:{prodiOptions:function(){var a=[];return this.prodis.forEach((function(i){a.push({label:web3.utils.hexToUtf8(i.namaProdi),value:web3.utils.hexToUtf8(i.namaProdi)})})),a}},methods:{createMahasiswa:function(){var i=this;if(this.isDataReady(this.mahasiswa)){var t=this.mahasiswa,s=a.from(JSON.stringify(t));u.add(s).then((function(a){web3.eth.getAccounts().then((function(t){var s=a[0].hash;return e["a"].methods.createMahasiswa(web3.utils.utf8ToHex(i.mahasiswa.nim),web3.utils.utf8ToHex(i.mahasiswa.nama),web3.utils.utf8ToHex(s),web3.utils.utf8ToHex(i.mahasiswa.prodi)).send({from:t[0]}).on("error",(function(a,i){console.log(a)})).on("transactionHash",(function(a){console.log(a)}))}))}))}},previewFiles:function(a){this.image=a[0]},uploadImage:function(){var a=this;u.add(this.image).then((function(i){var t=i[0].hash;a.mahasiswa.foto=t,u.cat("/ipfs/"+t).then((function(i){var t=new Blob([i],{type:"image/png"}),e=URL.createObjectURL(t);a.previewImage=e}))}))},isDataReady:function(a){var i=!0;return Object.keys(a).filter((function(a){return a})).forEach((function(t){null!=a[t]&&""!=a[t]||(i=!1)})),i},validator:function(a){return!!a&&a.length>1},inputValidator:function(a){return!!a},confirmRegister:function(a){this.confirmModal=!1,a&&this.createMahasiswa()},showAlert:function(a){a?this.dismissSuccess=5:this.dismissFail=5}}}}).call(this,t("b639").Buffer)},fc5b:function(a,i,t){"use strict";t.r(i);var e=function(){var a=this,i=a.$createElement,t=a._self._c||i;return t("div",{staticClass:"d-flex min-vh-100"},[t("CContainer",{attrs:{fluid:""}},[t("CRow",{staticClass:"justify-content-center"},[t("CCol",{attrs:{md:"8"}},[t("CAlert",{attrs:{show:a.dismissSuccess,closeButton:"",color:"success",fade:""},on:{"update:show":function(i){a.dismissSuccess=i}}},[a._v("Menambahkan Mahasiswa Baru Berhasil.")]),t("CAlert",{attrs:{show:a.dismissFail,closeButton:"",color:"danger",fade:""},on:{"update:show":function(i){a.dismissFail=i}}},[t("strong",[a._v("Permintaan Gagal")]),a._v(" : "+a._s(a.dismissFail)+" ")])],1),t("CCol",{attrs:{md:"12"}},[t("CCard",{staticClass:"mx-4 mb-5"},[t("CCardBody",{staticClass:"p-4"},[t("CForm",[t("h2",{staticClass:"mb-3"},[a._v("Tambah Mahasiswa")]),t("CRow",[t("CCol",{attrs:{sm:"8"}},[t("CInput",{attrs:{label:"Nama Lengkap",required:"","is-valid":a.validator,"invalid-feedback":"Data tidak boleh kosong.",value:a.mahasiswa.nama},on:{"update:value":function(i){return a.$set(a.mahasiswa,"nama",i)}}}),t("CSelect",{attrs:{label:"Jenis Kelamin",options:a.genderOptions,placeholder:"Pilih Jenis Kelamin","is-valid":a.inputValidator(this.mahasiswa.jenisKelamin),value:a.mahasiswa.jenisKelamin,required:""},on:{"update:value":function(i){return a.$set(a.mahasiswa,"jenisKelamin",i)}}}),t("CInput",{attrs:{label:"NIM",required:"","is-valid":a.validator,"invalid-feedback":"Data tidak boleh kosong.",value:a.mahasiswa.nim},on:{"update:value":function(i){return a.$set(a.mahasiswa,"nim",i)}}}),t("CInput",{attrs:{label:"NIK",required:"","is-valid":a.validator,"invalid-feedback":"Data tidak boleh kosong.",value:a.mahasiswa.nik},on:{"update:value":function(i){return a.$set(a.mahasiswa,"nik",i)}}}),t("CRow",[t("CCol",{attrs:{sm:"8"}},[t("CInput",{attrs:{label:"Tempat Lahir",placeholder:"Kota Lahir","is-valid":a.validator,"invalid-feedback":"Data tidak boleh kosong.",value:a.mahasiswa.tempatLahir},on:{"update:value":function(i){return a.$set(a.mahasiswa,"tempatLahir",i)}}})],1),t("CCol",{attrs:{sm:"4"}},[t("CInput",{attrs:{label:"Tanggal Lahir",type:"date","is-valid":a.inputValidator(this.mahasiswa.tanggalLahir),value:a.mahasiswa.tanggalLahir},on:{"update:value":function(i){return a.$set(a.mahasiswa,"tanggalLahir",i)}}})],1)],1),t("CInput",{attrs:{label:"Email",required:"","is-valid":a.validator,"invalid-feedback":"Data tidak boleh kosong.",value:a.mahasiswa.email},on:{"update:value":function(i){return a.$set(a.mahasiswa,"email",i)}}}),t("CInput",{attrs:{label:"No. Telepon",required:"","is-valid":a.validator,"invalid-feedback":"Data tidak boleh kosong.",value:a.mahasiswa.noTelp},on:{"update:value":function(i){return a.$set(a.mahasiswa,"noTelp",i)}}}),this.prodis?t("CSelect",{attrs:{label:"Prodi",options:a.prodiOptions,placeholder:"Pilih Prodi","is-valid":a.inputValidator(this.mahasiswa.prodi),value:a.mahasiswa.prodi,required:""},on:{"update:value":function(i){return a.$set(a.mahasiswa,"prodi",i)}}}):a._e()],1),t("CCol",[t("CCard",{staticClass:"mt-4"},[t("CCardHeader",[a._v("Upload Foto")]),t("CCardBody",{staticClass:"p-1 m-2"},[null==a.previewImage?t("div",[t("svg",{staticClass:"d-block w-100 h-1 00 img-fluid",staticStyle:{"background-color":"grey"}})]):a._e(),a.previewImage?t("div",[t("img",{staticClass:"d-block w-100 h-1 00 img-fluid",attrs:{src:a.previewImage}})]):a._e()]),t("CCardFooter",[t("CInputFile",{attrs:{placeholder:"Pilih Gambar",accept:"image/x-png, image/jpeg, image/bmp"},on:{change:a.previewFiles}}),t("CButton",{attrs:{color:"info",block:""},on:{click:a.uploadImage}},[a._v("Upload")])],1)],1)],1)],1),t("CButton",{attrs:{color:"success",block:""},on:{click:function(i){a.confirmModal=!0}}},[a._v("Buat Mahasiswa")])],1)],1)],1)],1)],1)],1),t("CModal",{attrs:{show:a.confirmModal,"no-close-on-backdrop":!0,centered:!0,title:"Konfirmasi",size:"sm",color:"dark"},on:{"update:show":function(i){a.confirmModal=i}},scopedSlots:a._u([{key:"header",fn:function(){return[t("h6",{staticClass:"modal-title"},[a._v("Konfirmasi")]),t("CButtonClose",{staticClass:"text-white",on:{click:function(i){a.confirmModal=!1}}})]},proxy:!0},{key:"footer",fn:function(){return[t("CButton",{attrs:{color:"danger"},on:{click:function(i){return a.confirmRegister(!1)}}},[a._v("Kembali")]),t("CButton",{attrs:{color:"success"},on:{click:function(i){return a.confirmRegister(!0)}}},[a._v("Konfirmasi")])]},proxy:!0}])},[a._v(" Apakah data telah sesuai? ")])],1)},s=[],n=t("04af"),o=n["a"],r=t("2877"),l=Object(r["a"])(o,e,s,!1,null,null,null);i["default"]=l.exports}}]);
//# sourceMappingURL=chunk-7da7a8c8.fc56126c.js.map