{"version":3,"sources":["webpack:///./src/views/mahasiswa/DetailMahasiswa.vue?68d0","webpack:///src/views/mahasiswa/DetailMahasiswa.vue","webpack:///./src/views/mahasiswa/DetailMahasiswa.vue?b062","webpack:///./src/views/mahasiswa/DetailMahasiswa.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","dataContract","fields","dataSubgraph","dataIpfs","staticClass","previewImage","_e","staticStyle","on","goBack","staticRenderFns","host","port","protocol","name","beforeRouteEnter","next","vm","usersOpened","from","fullPath","data","mahasiswaData","nim","String","ipfsHash","mahasiswaIpfs","computed","mhsDataSubgraph","mhsDetails","map","mhsDataOnChain","mhs","mhsDataIpfs","mhsIpfs","visibleDataSubgraph","filter","param","key","value","Date","web3","utils","isHexStrict","hexToUtf8","id","methods","$router","go","beforeMount","eth","getAccounts","then","CivitasHelper","$apollo","component"],"mappings":"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","file":"js/chunk-2d0c0dd9.ff2d8476.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('CRow',[_c('CCol',{attrs:{\"col\":\"12\"}},[_c('CCard',[_c('CCardHeader',[_vm._v(\"Mahasiswa Detail\")]),_c('CCardBody',[_c('h5',[_vm._v(\"Data On-Chain\")]),_c('CDataTable',{attrs:{\"striped\":\"\",\"small\":\"\",\"fixed\":\"\",\"items\":_vm.dataContract,\"fields\":_vm.fields}}),_c('h5',[_vm._v(\"Data Off-Chain (Subgraph)\")]),_c('CDataTable',{attrs:{\"striped\":\"\",\"small\":\"\",\"fixed\":\"\",\"items\":_vm.dataSubgraph,\"fields\":_vm.fields}}),_c('h5',[_vm._v(\"Data Off-Chain (IPFS)\")]),_c('CDataTable',{attrs:{\"striped\":\"\",\"small\":\"\",\"fixed\":\"\",\"items\":_vm.dataIpfs,\"fields\":_vm.fields}}),_c('CRow',{staticClass:\"justify-content-center\"},[_c('CCol',{attrs:{\"sm\":\"3\"}},[_c('CCard',[_c('CCardBody',[(!_vm.previewImage)?_c('div',[_c('CProgress',{staticClass:\"mt-1\",staticStyle:{\"height\":\"20px\"},attrs:{\"color\":\"success\",\"value\":100,\"animated\":\"\"}})],1):_vm._e(),(_vm.previewImage)?_c('div',[_c('img',{staticClass:\"d-block w-100 h-100 img-fluid\",attrs:{\"src\":_vm.previewImage}})]):_vm._e()])],1)],1)],1)],1),_c('CCardFooter',[_c('CButton',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.goBack}},[_vm._v(\"Back\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <CRow>\r\n    <CCol col=\"12\">\r\n      <CCard>\r\n        <CCardHeader>Mahasiswa Detail</CCardHeader>\r\n        <CCardBody>\r\n          <h5>Data On-Chain</h5>\r\n          <CDataTable striped small fixed :items=\"dataContract\" :fields=\"fields\" />\r\n          <h5>Data Off-Chain (Subgraph)</h5>\r\n          <CDataTable striped small fixed :items=\"dataSubgraph\" :fields=\"fields\" />\r\n          <h5>Data Off-Chain (IPFS)</h5>\r\n          <CDataTable striped small fixed :items=\"dataIpfs\" :fields=\"fields\" />\r\n          <CRow class=\"justify-content-center\">\r\n            <CCol sm=\"3\">\r\n              <CCard>\r\n                <CCardBody>\r\n                  <div v-if=\"!previewImage\">\r\n                    <CProgress\r\n                      color=\"success\"\r\n                      :value=\"100\"\r\n                      animated\r\n                      style=\"height:20px;\"\r\n                      class=\"mt-1\"\r\n                    />\r\n                  </div>\r\n                  <div v-if=\"previewImage\">\r\n                    <img class=\"d-block w-100 h-100 img-fluid\" :src=\"previewImage\" />\r\n                  </div>\r\n                </CCardBody>\r\n              </CCard>\r\n            </CCol>\r\n          </CRow>\r\n        </CCardBody>\r\n        <CCardFooter>\r\n          <CButton color=\"primary\" @click=\"goBack\">Back</CButton>\r\n        </CCardFooter>\r\n      </CCard>\r\n    </CCol>\r\n  </CRow>\r\n</template>\r\n\r\n<script>\r\nimport gql from \"graphql-tag\";\r\nimport CivitasHelper from \"@/contracts/CivitasHelper\";\r\n\r\nexport const GET_MAHASISWA = gql`\r\n  query mahasiswa($nim: ID!) {\r\n    mahasiswa(id: $nim) {\r\n      id\r\n      name\r\n      prodi\r\n      isLulus\r\n      isAssignedNINA\r\n      isUpdatedNINAData\r\n      linkedAccount {\r\n        id\r\n      }\r\n      timeCreated\r\n      lastUpdated\r\n    }\r\n  }\r\n`;\r\n\r\nconst ipfsClient = require(\"ipfs-http-client\");\r\nconst ipfs = ipfsClient({\r\n  host: \"ipfs.infura.io\",\r\n  port: 5001,\r\n  protocol: \"https\",\r\n});\r\n\r\nexport default {\r\n  name: \"MahasiswaDetail\",\r\n  beforeRouteEnter(to, from, next) {\r\n    next((vm) => {\r\n      vm.usersOpened = from.fullPath;\r\n    });\r\n  },\r\n  data() {\r\n    return {\r\n      usersOpened: null,\r\n      dataSubgraph: null,\r\n      mahasiswaData: {\r\n        nim: String(),\r\n        ipfsHash: String(),\r\n      },\r\n      mahasiswaIpfs: null,\r\n      dataContract: null,\r\n      dataIpfs: null,\r\n      previewImage: null,\r\n    };\r\n  },\r\n  computed: {\r\n    fields() {\r\n      return [\r\n        {\r\n          key: \"key\",\r\n          label: \"Informasi\",\r\n          _classes: \"font-weight-bold text-capitalize\",\r\n          _style: 'width:25%'\r\n        },\r\n        { key: \"value\", label: \"Nilai\" },\r\n      ];\r\n    },\r\n    mhsDataSubgraph() {\r\n      const mhsDetails = this.mahasiswa\r\n        ? Object.entries(this.mahasiswa)\r\n        : [[\"id\", \"Not found\"]];\r\n      return mhsDetails.map(([key, value]) => {\r\n        return { key, value };\r\n      });\r\n    },\r\n    mhsDataOnChain() {\r\n      const mhs = this.mahasiswaData\r\n        ? Object.entries(this.mahasiswaData)\r\n        : [[\"id\", \"Not found\"]];\r\n      return mhs.map(([key, value]) => {\r\n        return { key, value };\r\n      });\r\n    },\r\n    mhsDataIpfs() {\r\n      const mhsIpfs = this.mahasiswaIpfs\r\n        ? Object.entries(this.mahasiswaIpfs)\r\n        : [[\"id\", \"Not found\"]];\r\n      return mhsIpfs.map(([key, value]) => {\r\n        return { key, value };\r\n      });\r\n    },\r\n    visibleDataSubgraph() {\r\n      return this.mhsDataSubgraph.filter((param) => {\r\n        if (param.key == \"timeCreated\" || param.key == \"lastUpdated\") {\r\n          param.value = new Date(param.value * 1000);\r\n          return param;\r\n        }\r\n        if (web3.utils.isHexStrict(param.value)) {\r\n          param.value = web3.utils.hexToUtf8(param.value);\r\n        }\r\n        if (param.key == \"linkedAccount\") {\r\n          param.value = param.value ? param.value.id : \"Tidak Ada\";\r\n        }\r\n        if (param.value == null || param.key == \"__typename\") {\r\n          return null;\r\n        }\r\n        return param;\r\n      });\r\n    },\r\n  },\r\n  methods: {\r\n    goBack() {\r\n      this.$router.go(-1)\r\n    },\r\n  },\r\n  beforeMount() {\r\n    let context = this;\r\n    web3.eth.getAccounts().then((accounts) => {\r\n      CivitasHelper.methods\r\n        .getMahasiswa(this.$route.params.id)\r\n        .call({ from: accounts[0] })\r\n        .then(function (result) {\r\n          if (result) {\r\n            context.mahasiswaData.nim = web3.utils.hexToUtf8(result[0]);\r\n            context.mahasiswaData.ipfsHash = web3.utils.hexToUtf8(result[1]);\r\n            context.dataContract = context.mhsDataOnChain;\r\n            ipfs.cat(\"/ipfs/\" + context.mahasiswaData.ipfsHash).then((data) => {\r\n              context.mahasiswaIpfs = JSON.parse(data.toString());\r\n              context.dataIpfs = context.mhsDataIpfs;\r\n              ipfs.cat(\"/ipfs/\" + context.mahasiswaIpfs.foto).then((data) => {\r\n                let blob = new Blob([data], { type: \"image/png\" });\r\n                let url = URL.createObjectURL(blob);\r\n                context.previewImage = url;\r\n              });\r\n            });\r\n          }\r\n        });\r\n    });\r\n    this.$apollo\r\n      .query({\r\n        query: GET_MAHASISWA,\r\n        variables: {\r\n          nim: this.$route.params.id,\r\n        },\r\n      })\r\n      .then((response) => {\r\n        this.mahasiswa = response.data.mahasiswa;\r\n        this.dataSubgraph = this.visibleDataSubgraph;\r\n      });\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailMahasiswa.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailMahasiswa.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DetailMahasiswa.vue?vue&type=template&id=5dd8d83f&\"\nimport script from \"./DetailMahasiswa.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailMahasiswa.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}